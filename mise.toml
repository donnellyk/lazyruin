[tools]
go = "1.23"

[tasks.build]
description = "Build the lazyruin binary"
run = "go build -o bin/lazyruin ."

[tasks.run]
description = "Build and run lazyruin"
run = "go build -o bin/lazyruin . && ./bin/lazyruin"

[tasks.run-new]
description = "Build and run lazyruin directly into new note capture"
run = "go build -o bin/lazyruin . && ./bin/lazyruin --new"

[tasks.run-vault]
description = "Build and run lazyruin with a specific vault"
run = "go build -o bin/lazyruin . && ./bin/lazyruin --vault {{arg(name='vault')}}"

[tasks.install]
description = "Install lazyruin to GOPATH/bin"
run = "go install ."

[tasks.test]
description = "Run unit tests"
run = "go test ./..."

[tasks.test-v]
description = "Run unit tests with verbose output"
run = "go test -v ./..."

[tasks.test-gui]
description = "Run headless GUI integration tests"
run = "go test -v ./pkg/gui/"

[tasks.test-gui-race]
description = "Run headless GUI integration tests with race detector"
run = "go test -race ./pkg/gui/"

[tasks.test-integration]
description = "Run integration tests (requires ruin CLI)"
run = "go test -tags=integration ./..."

[tasks.test-all]
description = "Run all tests (unit + integration)"
run = "go test -tags=integration ./..."

[tasks.clean]
description = "Remove build artifacts"
run = "rm -rf bin/"

[tasks.fmt]
description = "Format all Go files"
run = "go fmt ./..."

[tasks.lint]
description = "Run go vet"
run = "go vet ./..."
